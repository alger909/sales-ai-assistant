<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="custom-header">
    <view class="header-left">
      <view class="back-btn" bindtap="goBack">
        <text class="back-icon">â†</text>
      </view>
      <text class="header-title">AIæ•™ç»ƒå¯¹è¯</text>
    </view>
  </view>

  <!-- æ¶ˆæ¯åˆ—è¡¨ -->
  <scroll-view scroll-y class="message-list" id="message-container">
    <block wx:for="{{messages}}" wx:key="index">
      <!-- ç³»ç»Ÿæ¶ˆæ¯ -->
      <block wx:if="{{item.type === 'system'}}">
        <view class="system-message">
          <text>{{item.content}}</text>
        </view>
      </block>
      
      <!-- AIæ¶ˆæ¯ -->
      <block wx:elif="{{item.type === 'ai'}}">
        <view class="message ai-message">
          <view class="avatar">
            <text class="avatar-text">AI</text>
          </view>
          <view class="message-content">
            <text class="message-text">{{item.content}}</text>
            <view class="message-actions" wx:if="{{index === messages.length - 1 && showActions}}">
              <view class="action-btn like-btn" bindtap="likeResponse">
                <text class="action-icon">ğŸ‘</text>
                <text class="action-text">æœ‰å¸®åŠ©</text>
              </view>
              <view class="action-btn dislike-btn" bindtap="dislikeResponse">
                <text class="action-icon">ğŸ‘</text>
                <text class="action-text">ä¸æ»¡æ„</text>
              </view>
            </view>
          </view>
        </view>
      </block>
      
      <!-- ç”¨æˆ·æ¶ˆæ¯ -->
      <block wx:elif="{{item.type === 'user'}}">
        <view class="message user-message">
          <view class="message-content">
            <text class="message-text">{{item.content}}</text>
          </view>
          <view class="avatar">
            <text class="avatar-text">æˆ‘</text>
          </view>
        </view>
      </block>
    </block>
  </scroll-view>

  <!-- è¾“å…¥åŒº -->
  <view class="input-area">
    <view class="input-box">
      <input class="message-input" 
             placeholder="è¾“å…¥æ‚¨çš„é”€å”®è¯æœ¯..." 
             value="{{inputValue}}"
             bindinput="inputChange" 
             confirm-type="send"
             bindconfirm="sendMessage"/>
      <view class="send-btn" bindtap="sendMessage">
        <text class="send-icon">â†‘</text>
      </view>
    </view>
  </view>
</view>